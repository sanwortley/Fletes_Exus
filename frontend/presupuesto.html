<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calcular presupuesto - Fletes Larga Distancia</title>

  <!-- Tipografías -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=DM+Sans:wght@500;700&display=swap" rel="stylesheet">

  <style>
    :root{ --primary:#ffcc00; --bg:#000; --text:#fff; --muted:#ccc; --card:#111; --radius:20px; --line:#1e1e1e; }

    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing:.1px; background:var(--bg); color:var(--text); line-height:1.6;
    }

    /* ===== Header ===== */
    header{
      position:sticky; top:0; z-index:50;
      background:linear-gradient(180deg,#000 0%, #000 85%, rgba(0,0,0,.86) 100%);
      display:flex; justify-content:space-between; align-items:center;
      padding:16px 24px; border-bottom:1px solid rgba(255,204,0,.35);
      backdrop-filter: blur(6px);
    }
    header b{ color:var(--primary); font-size:1.4rem; letter-spacing:.5px; font-family:"DM Sans", Inter, sans-serif; font-weight:700; }
    nav a{ color:#fff; text-decoration:none; margin-left:10px; padding:6px 10px; font-weight:600; opacity:.9; transition:.2s; border-radius:10px; }
    nav a:hover{ opacity:1; color:var(--primary); background:rgba(255,204,0,.12); }
    nav a.active{ color:var(--primary); background:rgba(255,204,0,.12); }

    .container{ max-width:1120px; margin:40px auto; padding:0 20px; }

    /* ===== Hero ===== */
    .hero{
      background:#0e0e0e; border:1px solid var(--line); border-radius:var(--radius);
      padding:44px 28px; text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,.6), 0 0 0 1px rgba(255,204,0,.08) inset;
      margin-bottom:28px;
    }
    .hero h1{ color:var(--primary); font-size:2.2rem; margin-bottom:12px; line-height:1.15; letter-spacing:.2px; font-family:"DM Sans", Inter, sans-serif; }
    .hero p{ font-size:1.08rem; max-width:680px; margin:0 auto; color:#eaeaea; opacity:.92; }

    /* ===== Layout tarjetas ===== */
    .grid2{ display:grid; grid-template-columns:2fr 1fr; gap:24px; }
    @media (max-width:980px){ .grid2{ grid-template-columns:1fr } }

    .card{
      background:linear-gradient(180deg,#111 0%, #0d0d0d 100%);
      border:1px solid var(--line); border-radius:20px; padding:22px;
      box-shadow:0 2px 10px rgba(0,0,0,.4);
    }

    /* ===== Form grid (12 cols) ===== */
    .grid{ display:grid; grid-template-columns:repeat(12, minmax(0,1fr)); gap:16px; }
    .grid > div{ grid-column:span 4; min-width:0; } /* 3 por fila */
    .full{ grid-column:1/-1; }

    /* Origen + Destino + Fecha en misma fila sin tocar HTML */
    @supports(selector(:has(*))){
      .grid > .full:has(#origen),
      .grid > .full:has(#destino){ grid-column:span 4; }
    }
    @supports not (selector(:has(*))){
      .grid > .full:nth-of-type(4),
      .grid > .full:nth-of-type(5){ grid-column:span 4; }
    }

    label{ display:block; font-weight:700; margin-bottom:6px; }
    input, select{
      width:100%; height:48px; padding:0 14px; border-radius:14px;
      border:1px solid #2a2a2a; background:#0f0f0f; color:var(--text);
      outline:none; transition:border-color .15s, box-shadow .15s;
      font-size:.95rem;
    }
    input::placeholder{ color:#8c8c8c; }
    input[type="date"]{ padding:0 10px; }
    input:focus, select:focus{
      border-color:rgba(255,204,0,.55);
      box-shadow:0 0 0 3px rgba(255,204,0,.12);
    }

    /* Acciones en línea (checkbox + botón) */
    .actions-row{
      grid-column:1/-1;
      display:flex; align-items:center; justify-content:space-between;
      flex-wrap:wrap; gap:16px; margin-top:6px;
    }
    .actions-row .left{ display:flex; align-items:center; gap:10px; }
    .actions-row input[type="checkbox"]{ width:auto; height:auto; accent-color:var(--primary); }

    /* Botones */
    .btn{
      background:var(--primary); color:#111; font-weight:800; border:0;
      padding:12px 22px; border-radius:14px; box-shadow:0 8px 22px rgba(255,204,0,.25);
      cursor:pointer; transition:.2s;
    }
    .btn:hover{ transform:translateY(-1px) scale(1.02); }
    .btn-ghost{ background:#1a1a1a; color:#fff; border:1px solid #333; padding:12px 18px; border-radius:12px; }
    .btn-ghost:hover{ transform:translateY(-1px); border-color:#555; }

    .help{ color:#bdbdbd; font-size:.92rem; }

    /* ===== Validación ===== */
    .help.error{ color:#ff6b6b; font-weight:700; }
    input.invalid, select.invalid{
      border-color:#ff5a5a !important;
      box-shadow:0 0 0 3px rgba(255,90,90,.18) !important;
    }
    @keyframes shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
    .invalid{ animation:shake .35s; }

    /* ===== Resultado ===== */
    .result{
      display:none; margin-top:16px; border-radius:18px; padding:18px;
      background:#0b0b0b; border:1px solid #243042;
    }
    .mono{ font-variant-numeric: tabular-nums; }
    .pill{ display:inline-block; padding:6px 10px; border-radius:999px; border:1px solid #2a2a2a; background:#141414; font-weight:700; font-size:12px; }
    .total{ color:var(--primary); font-size:1.6rem; margin:10px 0 6px; font-weight:900; }

    /* ===== Modal ===== */
    .modal{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.65); z-index:9999; }
    .modal.open{ display:flex; }
    .modal-box{ width:min(720px,92vw); background:#0f0f0f; border:1px solid var(--line); border-radius:18px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.6); }
    .modal-title{ font-size:1.2rem; font-weight:800; color:var(--primary); margin-bottom:10px; }
    .conds{ list-style:none; margin:8px 0 12px; padding:0; }
    .conds li{ margin:8px 0; }

    /* ===== Footer ===== */
    footer{
      background:#080808; border-top:1px solid rgba(255,204,0,.3);
      padding:30px 20px; margin-top:46px; text-align:center;
    }
    .footer-title{ color:var(--primary); font-weight:800; font-size:1.15rem; margin-bottom:10px; letter-spacing:.2px; }
    .social{ display:flex; justify-content:center; gap:20px; margin:14px 0; }
    .social a{
      color:var(--text); text-decoration:none; display:inline-flex; align-items:center; justify-content:center;
      width:44px; height:44px; border-radius:50%; border:1px solid #222; background:#121212; transition:.2s;
    }
    .social a:hover{ border-color:var(--primary); box-shadow:0 0 0 3px rgba(255,204,0,.15); }
    .social a svg{ width:22px; height:22px; fill:#fff; }
    .footer-info{ color:#bdbdbd; font-size:.92rem; margin-top:8px; }

    /* ===== Responsive ===== */
    @media (max-width:980px){ .grid > div{ grid-column:span 6; } }
    @media (max-width:640px){
      .grid{ grid-template-columns:1fr; }
      .grid > div, .full{ grid-column:1/-1; }
      .actions-row{ flex-direction:column; align-items:flex-start; }
    }
  </style>
</head>

<body>
  <header>
    <b>Fletes Larga Distancia</b>
    <nav>
      <a href="/index">Inicio</a>
      <a href="/presupuesto">Presupuesto</a>
      <a href="/admin">Admin</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Calcular presupuesto</h1>
      <p>Presupuesto fijo por viaje. Estimá el costo total del servicio al instante.</p>
    </section>

    <div class="grid2">
      <!-- Formulario -->
      <section class="card">
        <div class="grid">
          <div>
            <label for="nombre">Nombre y apellido</label>
            <input id="nombre" placeholder="Juan Pérez" required>
          </div>
          <div>
            <label for="tel">Teléfono</label>
            <input id="tel" placeholder="351..." required>
          </div>
          <div>
            <label for="tipo">Tipo de carga</label>
            <select id="tipo">
              <option value="mudanza">Mudanza</option>
              <option value="puntual">Algo puntual</option>
            </select>
          </div>

          <div class="full">
            <label for="origen">Origen (dirección completa)</label>
            <input id="origen" placeholder="Calle y número" required>
            <div class="help">Ej: Colón 100, Córdoba</div>
          </div>

          <div class="full">
            <label for="destino">Destino (dirección completa)</label>
            <input id="destino" placeholder="Calle y número" required>
          </div>

          <div>
            <label for="fecha">Fecha</label>
            <input id="fecha" type="date" required>
          </div>

          <!-- Checkbox + botón -->
          <div class="actions-row">
            <div class="left">
              <input id="ayudante" type="checkbox">
              <label for="ayudante">¿Necesita ayudante?</label>
            </div>
            <button class="btn" id="btnCalc">Calcular</button>
          </div>
          <span id="msg" class="help"></span>
        </div>

        <section id="out" class="result"></section>
      </section>

      <!-- Aside -->
      <aside class="card">
        <h3 style="color:var(--primary); margin-bottom:8px;">¿Por qué elegirnos?</h3>
        <ul class="bullets">
          <li><b>Presupuesto inmediato:</b> en segundos.</li>
          <li><b>Precio fijo por viaje:</b> sin sorpresas.</li>
          <li><b>Capacidad:</b> 10m³ / 1.2 toneladas.</li>
          <li><b>Puntualidad y confiabilidad</b> garantizadas.</li>
          <li><b>Córdoba y ciudades vecinas.</b></li>
          <li><b>Atención familiar</b> y personalizada.</li>
        </ul>
        <div class="help" style="margin-top:10px">¿Dudas? Escribinos por WhatsApp y te respondemos al toque.</div>
      </aside>
    </div>
  </main>

  <!-- Modal de condiciones -->
  <div class="modal" id="modalConds">
    <div class="modal-box">
      <div class="modal-title">Antes de continuar</div>
      <p class="help">Confirmá que entendés estas condiciones:</p>
      <ul class="conds">
        <li>Las cosas están listas para cargar y en planta baja.</li>
        <li>El chofer ayuda, pero debe haber al menos un ayudante más.</li>
        <li>Debe poder arrimar el camión hasta el ingreso.</li>
      </ul>
      <div style="display:flex; justify-content:flex-end; gap:10px;">
        <button class="btn-ghost" id="btnCancelar">Cancelar</button>
        <button class="btn" id="btnAceptar">Acepto</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <div class="footer-title">Contactanos</div>
    <div class="social">
      <a href="https://wa.me/5493516678989?text=Hola%20Javier,%20necesito%20un%20presupuesto" target="_blank" title="WhatsApp" aria-label="WhatsApp">
        <svg viewBox="0 0 32 32" role="img" aria-hidden="true">
          <path d="M16 3C9.372 3 4 8.372 4 15c0 2.115.55 4.103 1.514 5.837L4 29l8.377-1.472A11.91 11.91 0 0 0 16 27c6.628 0 12-5.372 12-12S22.628 3 16 3zm0 2c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.9 9.9 0 0 1-3.987-.832l-.284-.12-.298.052-4.2.738.748-4.104.053-.29-.143-.257A9.9 9.9 0 0 1 6 15c0-5.523 4.477-10 10-10zm5.053 13.873c-.275-.138-1.63-.806-1.875-.898-.244-.092-.422-.138-.6.138-.18.275-.694.956-.85 1.15-.156.193-.312.206-.575.07-.275-.138-1.158-.426-2.213-1.362-.818-.72-1.373-1.61-1.534-1.894-.162-.281-.02-.436.118-.593.122-.122.275-.318.412-.48.138-.162.18-.275.275-.468.092-.193.046-.35-.023-.504-.07-.156-.6-1.448-.825-1.984-.218-.52-.444-.448-.606-.456-.156-.008-.336-.01-.516-.01-.18 0-.47.068-.716.34-.244.275-.932.91-.932 2.222 0 1.312.956 2.58 1.09 2.758.138.18 2.01 3.07 4.85 4.284.68.296 1.21.472 1.63.604.686.218 1.312.187 1.81.114.552-.082 1.69-.69 1.944-1.355.244-.664.244-1.238.172-1.35-.07-.11-.26-.18-.55-.32z"/>
        </svg>
      </a>
      <a href="https://www.instagram.com/fletes_largadistancia" target="_blank" title="Instagram" aria-label="Instagram">
        <svg viewBox="0 0 24 24" role="img" aria-hidden="true"><path d="M12 2.2c3.2 0 3.6 0 4.9.1 1.2.1 1.9.2 2.3.4.6.2 1 .4 1.5.9.5.5.7.9.9 1.5.2.4.3 1.1.4 2.3.1 1.3.1 1.7.1 4.9s0 3.6-.1 4.9c-.1 1.2-.2 1.9-.4 2.3-.2.6-.4 1-.9 1.5-.5.5-.9.7-1.5.9-.4.2-1.1.3-2.3.4-1.3.1-1.7.1-4.9.1s-3.6 0-4.9-.1c-1.2-.1-1.9-.2-2.3-.4-.6-.2-1-.4-1.5-.9-.5-.5-.7-.9-.9-1.5-.2-.4-.3-1.1-.4-2.3C2.2 15.6 2.2 15.2 2.2 12s0-3.6.1-4.9c.1-1.2.2-1.9.4-2.3.2-.6.4-1 .9-1.5.5-.5.9-.7 1.5-.9.4-.2 1.1-.3 2.3-.4C8.4 2.2 8.8 2.2 12 2.2m0-1.7C8.7.5 8.3.5 7 .6 5.7.7 4.8.9 4.1 1.2c-.8.3-1.5.7-2.2 1.4C1.3 3.2.9 3.9.6 4.7c-.3.7-.5 1.6-.6 2.9C0 8.8 0 9.3 0 12s0 3.2.1 4.5c.1 1.3.3 2.2.6 2.9.3.8.7 1.5 1.4 2.2.7.7 1.4 1.1 2.2 1.4.7.3 1.6.5 2.9.6 1.3.1 1.8.1 4.5.1s3.2 0 4.5-.1c1.3-.1 2.2-.3 2.9-.6.8-.3 1.5-.7 2.2-1.4.7-.7 1.1-1.4 1.4-2.2.3-.7.5-1.6.6-2.9.1-1.3.1-1.8.1-4.5s0-3.2-.1-4.5c-.1-1.3-.3-2.2-.6-2.9-.3-.8-.7-1.5-1.4-2.2-.7-.7-1.4-1.1-2.2-1.4-.7-.3-1.6-.5-2.9-.6C15.2.5 14.7.5 12 .5z"/><path d="M12 5.8A6.2 6.2 0 1 0 12 18.2 6.2 6.2 0 1 0 12 5.8zm0 10.2A4 4 0 1 1 12 8a4 4 0 0 1 0 8z"/><circle cx="18.4" cy="5.6" r="1.4"/></svg>
      </a>
      <a href="tel:+5493516678989" title="Llamar" aria-label="Teléfono">
        <svg viewBox="0 0 24 24" role="img" aria-hidden="true">
          <path d="M6.6 10.8a15.1 15.1 0 0 0 6.6 6.6l2.2-2.2c.3-.3.8-.4 1.2-.2 1.3.5 2.7.8 4.1.8.7 0 1.2.5 1.2 1.2V21c0 .7-.5 1.2-1.2 1.2C10.4 22.2 1.8 13.6 1.8 2.4 1.8 1.7 2.3 1.2 3 1.2H6c.7 0 1.2.5 1.2 1.2 0 1.4.3 2.8.8 4.1.1.4 0 .9-.3 1.2L6.6 10.8z"/>
        </svg>
      </a>
    </div>
    <div class="footer-info">
      © 2025 Fletes Larga Distancia · Córdoba, Argentina<br/>
      Atención rápida, confiable y con presupuesto inmediato.
    </div>
  </footer>

  <script>
    const API_BASE = (
      location.hostname === 'localhost' || location.hostname === '127.0.0.1'
    ) ? 'http://127.0.0.1:8000' : 'https://fletes-exus.onrender.com';

    // Marcar link activo
    (function(){
      const here = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('header nav a').forEach(a=>{
        if(a.getAttribute('href')===here) a.classList.add('active');
      });
    })();

    // === Timers/reset ===
    let cleanupTimer = null;
    let cleanupInterval = null;

    function resetForm() {
      ["nombre","tel","origen","destino","fecha"].forEach(id=>{
        const el = document.getElementById(id);
        if (el) el.value = "";
      });
      const tipo = document.getElementById("tipo"); if (tipo) tipo.value = "mudanza";
      const chk  = document.getElementById("ayudante"); if (chk) chk.checked = false;

      const msg = document.getElementById("msg"); if (msg) { msg.textContent = ""; msg.classList.remove("error"); }
      const out = document.getElementById("out"); if (out) { out.style.display="none"; out.innerHTML=""; }

      clearTimeout(cleanupTimer);
      clearInterval(cleanupInterval);
      document.getElementById('cleanupTicker')?.remove();
    }

    function scheduleCleanup(seconds = 30) {
      clearTimeout(cleanupTimer);
      clearInterval(cleanupInterval);
      document.getElementById('cleanupTicker')?.remove();

      const cw = document.getElementById('contactWrap');
      if (!cw) return;

      const span = document.createElement('span');
      span.className = 'help';
      span.id = 'cleanupTicker';
      span.style.marginLeft = '8px';
      let left = seconds;
      span.textContent = `La página se reinicia en ${left}s`;
      cw.appendChild(span);

      cleanupInterval = setInterval(() => {
        left -= 1;
        if (left <= 0) clearInterval(cleanupInterval);
        span.textContent = `La página se reinicia en ${Math.max(left,0)}s`;
      }, 1000);

      cleanupTimer = setTimeout(resetForm, seconds * 1000);
    }

    // ===== VALIDACIÓN =====
    const requiredIds = ["nombre","tel","origen","destino","fecha"];
    const $ = (id)=>document.getElementById(id);

    function clearMsg(){
      const msg = $("msg");
      if(!msg) return;
      msg.textContent = "";
      msg.classList.remove("error");
    }

    function validateForm(){
      clearMsg();
      let ok = true, first = null;
      requiredIds.forEach(id=>{
        const el = $(id);
        const val = (id === "fecha") ? el.value : (el.value || "").trim();
        if(!val){
          ok = false;
          el.classList.add("invalid");
          if(!first) first = el;
        }else{
          el.classList.remove("invalid");
        }
      });
      if(!ok){
        const msg = $("msg");
        if(msg){
          msg.classList.add("error");
        }
        first?.scrollIntoView({behavior:"smooth", block:"center"});
        first?.focus();
      }
      return ok;
    }

    // limpiar error al tipear
    requiredIds.forEach(id=>{
      $(id)?.addEventListener("input", (e)=>{
        e.target.classList.remove("invalid");
        clearMsg();
      });
    });

    // Modal
    const modal = document.getElementById('modalConds');
    document.getElementById('btnCalc').addEventListener('click', ()=>{
      if(!validateForm()) return;        // bloquea si falta algo
      modal.classList.add('open');       // si está ok, abre el modal
    });
    document.getElementById('btnCancelar').addEventListener('click', ()=> modal.classList.remove('open'));
    document.getElementById('btnAceptar').addEventListener('click', ()=>{
      modal.classList.remove('open');
      runCalc();
    });

    async function postJSON(url, payload){
      const res = await fetch(url, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload||{})
      });
      const j = await res.json().catch(()=> ({}));
      if(!res.ok) throw new Error(j.detail || 'Error de servidor');
      return j;
    }

    async function runCalc(){
      clearTimeout(cleanupTimer);
      clearInterval(cleanupInterval);
      document.getElementById('cleanupTicker')?.remove();

      const data = {
        nombre: $("nombre").value.trim(),
        telefono: $("tel").value.trim(),
        tipo_carga: $("tipo").value,
        origen: $("origen").value.trim(),
        destino: $("destino").value.trim(),
        fecha: $("fecha").value,
        ayudante: $("ayudante").checked,
        accepted_terms: true,
        accepted_terms_at: new Date().toISOString()
      };

      const msg = document.getElementById('msg');
      msg.textContent = "Calculando...";

      try{
        const resp = await postJSON(`${API_BASE}/api/quote`, data);
        const q = resp.quote || resp;

        const totalVal     = q?.monto_estimado ?? 0;
        const estadoVal    = (q?.estado ?? "preview").toString();
        const origenShow   = q?.origen ?? data.origen;
        const destinoShow  = q?.destino ?? data.destino;

        const fmt = (n)=>Number(n||0).toLocaleString('es-AR');

        const out = document.getElementById('out');
        out.style.display = 'block';
        out.innerHTML = `
          <h3>Resultado</h3>
          <p><b>Origen:</b> ${origenShow} &nbsp;→&nbsp; <b>Destino:</b> ${destinoShow}</p>
          <div class="total">Total estimado: $ ${fmt(totalVal)}</div>
          <div class="pill">Estado: ${estadoVal.toUpperCase()}</div>
          <p class="help" style="margin-top:8px">Zona de prueba: esto <b>no se guarda</b> hasta que presiones "Enviar al profesional".</p>

          <div class="row" style="margin-top:12px; gap:10px; flex-wrap:wrap">
            <button class="btn" id="btnEnviar">Enviar al profesional</button>
            <button class="btn-ghost" id="btnCancelarDraft">Cancelar presupuesto</button>
          </div>

          <div id="contactWrap" style="margin-top:12px"></div>
          <p class="help" style="margin-top:6px">
            No mostramos el detalle interno. El profesional recibirá tu solicitud y se pondrá en contacto.
          </p>
        `;

        msg.textContent = "";

        const btnEnviar = document.getElementById('btnEnviar');
        const cw = document.getElementById('contactWrap');

        // Habilitar envío directo (sin draftId)
        btnEnviar.disabled = false;
        btnEnviar.addEventListener('click', async () => {
          if (btnEnviar.dataset.busy === "1") return;
          btnEnviar.dataset.busy = "1";
          btnEnviar.disabled = true;

          const oldText = btnEnviar.textContent;
          btnEnviar.textContent = "Enviando…";

          try {
            const sentResp = await postJSON(`${API_BASE}/api/quote/send`, data);
            const sent = sentResp.quote || sentResp;
            cw.innerHTML = `<p class="help" style="margin:6px 0">¡Listo! Se envió tu presupuesto.</p>`;
            scheduleCleanup(30);
          } catch (e) {
            const m = String(e.message || "Error desconocido");
            alert(`No se pudo enviar: ${m}`);
            btnEnviar.disabled = false;
            btnEnviar.dataset.busy = "0";
            btnEnviar.textContent = oldText;
            return;
          }

          btnEnviar.textContent = "Enviado";
        });

        // Cancelar (no hay nada guardado hasta enviar)
        document.getElementById('btnCancelarDraft')?.addEventListener('click', async ()=>{
          try {
            const btn = document.getElementById('btnCancelarDraft');
            btn.disabled = true;
            const out = document.getElementById('out');
            out.style.display = 'none';
            resetForm();
            alert('Presupuesto cancelado.');
          } catch(e) {
            alert('No se pudo cancelar: ' + e.message);
          } finally {
            document.getElementById('btnCancelarDraft').disabled = false;
          }
        });

      }catch(e){
        const out = document.getElementById('out');
        out.style.display = 'block';
        out.innerHTML = `<div class="pill" style="border-color:#ffb7b3;background:#1a0f10;color:#ffb3b3">Error</div><p class="help">` + (e.message || 'No se pudo calcular') + `</p>`;
        const msg = document.getElementById('msg'); msg.textContent = ""; msg.classList.add("error");
      }
    } // <-- cierra runCalc

    // ===== Validaciones en vivo de nombre y teléfono =====
    const telInput = document.getElementById("tel");
    const nameInput = document.getElementById("nombre");

    // Solo números en teléfono
    telInput.addEventListener("input", (e) => {
      const cleaned = e.target.value.replace(/\D/g, ""); // quita todo lo que no sea dígito
      if (e.target.value !== cleaned) {
        e.target.classList.add("invalid");
        document.getElementById("msg").classList.add("error");
      } else {
        e.target.classList.remove("invalid");
        clearMsg();
      }
      e.target.value = cleaned;
    });

    // Solo texto y espacios en nombre
    nameInput.addEventListener("input", (e) => {
      const valid = /^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]+$/.test(e.target.value.trim());
      if (!valid && e.target.value !== "") {
        e.target.classList.add("invalid");
        document.getElementById("msg").classList.add("error");
      } else {
        e.target.classList.remove("invalid");
        clearMsg();
      }
    });
  </script>

</body>
</html>
